<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kenrou.mapper.ItemsCommentsMapperCustom" >

  <resultMap id="myComments" type="com.kenrou.pojo.vo.center.CenterItemCommentVO">
    <id column="commentId" property="commentId" />
    <result column="content" property="content" />
    <result column="createdTime" property="createdTime" />
    <result column="itemId" property="itemId" />
    <result column="itemName" property="itemName" />
    <result column="specName" property="specName" />
    <result column="itemImg" property="itemImg" />
  </resultMap>

  <select id="queryMyComments" parameterType="Map" resultMap="myComments">
    SELECT
      ic.id as commentId,
      ic.content as content,
      ic.created_time as createdTime,
      ic.item_id as itemId,
      ic.item_name as itemName,
      ic.sepc_name as specName,
      ii.url as itemImg
    FROM
      items_comments ic
    LEFT JOIN
      items_img ii
    ON
      ic.item_id = ii.item_id
    WHERE
      ic.user_id = #{paramsMap.userId}
    AND
      ii.is_main = 1
    ORDER BY
      ic.created_time
    DESC
  </select>
</mapper>